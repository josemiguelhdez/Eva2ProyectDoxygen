<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>EvaProyectDoc: Referencia de la Clase eva2.server.go.problems.MatlabEvalMediator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EvaProyectDoc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Buscar');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Página&#160;principal</span></a></li>
      <li><a href="pages.html"><span>Páginas&#160;relacionadas</span></a></li>
      <li><a href="namespaces.html"><span>Paquetes</span></a></li>
      <li class="current"><a href="annotated.html"><span>Clases</span></a></li>
      <li><a href="files.html"><span>Archivos</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Lista&#160;de&#160;clases</span></a></li>
      <li><a href="classes.html"><span>Índice&#160;de&#160;clases</span></a></li>
      <li><a href="hierarchy.html"><span>Jerarquía&#160;de&#160;la&#160;clase</span></a></li>
      <li><a href="functions.html"><span>Miembros&#160;de&#160;las&#160;clases</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Todo</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Clases</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Archivos</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Funciones</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Valores de enumeraciones</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Páginas</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceeva2.html">eva2</a></li><li class="navelem"><a class="el" href="namespaceeva2_1_1server.html">server</a></li><li class="navelem"><a class="el" href="namespaceeva2_1_1server_1_1go.html">go</a></li><li class="navelem"><a class="el" href="namespaceeva2_1_1server_1_1go_1_1problems.html">problems</a></li><li class="navelem"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html">MatlabEvalMediator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Métodos públicos</a> &#124;
<a href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator-members.html">Lista de todos los miembros</a>  </div>
  <div class="headertitle">
<div class="title">Referencia de la Clase eva2.server.go.problems.MatlabEvalMediator</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Métodos públicos</h2></td></tr>
<tr class="memitem:a5907328d812d5b7e760eb8377a115c74"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a5907328d812d5b7e760eb8377a115c74">MatlabEvalMediator</a> (int threadSleepTime)</td></tr>
<tr class="separator:a5907328d812d5b7e760eb8377a115c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a4904a9d1d738b27cfe8a4d456ff549"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a6a4904a9d1d738b27cfe8a4d456ff549">MatlabEvalMediator</a> ()</td></tr>
<tr class="separator:a6a4904a9d1d738b27cfe8a4d456ff549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeba95238360f96c3d00666cd991bc0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#adeba95238360f96c3d00666cd991bc0a">setMatlabProblem</a> (<a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_problem.html">MatlabProblem</a> theMP)</td></tr>
<tr class="separator:adeba95238360f96c3d00666cd991bc0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3f5a0df22697f52d12d77e66d8e1892"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#ab3f5a0df22697f52d12d77e66d8e1892">getState</a> ()</td></tr>
<tr class="separator:ab3f5a0df22697f52d12d77e66d8e1892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac14638a42af72f90069826a9e9b445de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#ac14638a42af72f90069826a9e9b445de">run</a> (int id)</td></tr>
<tr class="separator:ac14638a42af72f90069826a9e9b445de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f46345bc7c4cc2734c1815e34d72c18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a2f46345bc7c4cc2734c1815e34d72c18">run</a> ()</td></tr>
<tr class="separator:a2f46345bc7c4cc2734c1815e34d72c18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a579e11966ebc2c1112cd7d50b8834020"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a579e11966ebc2c1112cd7d50b8834020">quit</a> ()</td></tr>
<tr class="separator:a579e11966ebc2c1112cd7d50b8834020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe976e526129f24f94234002a299832b"><td class="memItemLeft" align="right" valign="top">Object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#afe976e526129f24f94234002a299832b">getQuestion</a> ()</td></tr>
<tr class="separator:afe976e526129f24f94234002a299832b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e9d2f1581ed7e3b87106b424bd57abd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a9e9d2f1581ed7e3b87106b424bd57abd">setAnswer</a> (double[] y)</td></tr>
<tr class="separator:a9e9d2f1581ed7e3b87106b424bd57abd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad528111aed1211c20a632980b05b0fb1"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#ad528111aed1211c20a632980b05b0fb1">isFinished</a> ()</td></tr>
<tr class="separator:ad528111aed1211c20a632980b05b0fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f44d10b424ab126bb7742e3701a3192"><td class="memItemLeft" align="right" valign="top">Object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a9f44d10b424ab126bb7742e3701a3192">getSolution</a> ()</td></tr>
<tr class="separator:a9f44d10b424ab126bb7742e3701a3192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bdaf1382420bca8ca18f7aa7bca89b1"><td class="memItemLeft" align="right" valign="top">Object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a5bdaf1382420bca8ca18f7aa7bca89b1">getSolutionSet</a> ()</td></tr>
<tr class="separator:a5bdaf1382420bca8ca18f7aa7bca89b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripción detallada</h2>
<div class="textblock"><p>This implements a thread acting as a mediator between EvA and Matlab. Thanks to the idea of Henning Schmidt! As Java calling Matlab directly causes problems (due to Matlabs single-threadedness), Matlab now starts a mediator thread which receives the data necessary to perform the evaluation in matlab from the optimization thread. On receiving this "question" from the optimizer, the mediator thread finishes, returning to Matlab and signaling that there is work to do. However, the mediator object remains persistent, and the optimization thread keeps running and waits for the mediator to signal that there is a result, which happens if Matlab calls <a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a9e9d2f1581ed7e3b87106b424bd57abd">setAnswer()</a>. Then the optimizer thread resumes, while Matlab has to restart the mediator thread, so that it may be informed about the next question, and so on. I havent checked how much performance is lost compared to the earlier, asynchronous version, but it feels similar, a difference being that both cpu's are now at 100% load, which is because two threads are running (and always at least waiting actively). Adding sleep time reduces CPU load a lot but reduces efficiency badly at the same time, probably because theres so much going on. For cases where the evaluation function is very time-consuming, adding sleep time might be an option.</p>
<dl class="section author"><dt>Autor</dt><dd>mkron </dd></dl>
</div><h2 class="groupheader">Documentación del constructor y destructor</h2>
<a class="anchor" id="a5907328d812d5b7e760eb8377a115c74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eva2.server.go.problems.MatlabEvalMediator.MatlabEvalMediator </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threadSleepTime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor with integer argument for the sleep time in between requests. Values higher than 0 reduce cpu load of the waiting thread but may also reduce allover runtime for fast evaluation functions.</p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">threadSleepTime</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                                   {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        sleepTime=threadSleepTime;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6a4904a9d1d738b27cfe8a4d456ff549"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eva2.server.go.problems.MatlabEvalMediator.MatlabEvalMediator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor with sleep time set to zero. </p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        sleepTime=0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentación de las funciones miembro</h2>
<a class="anchor" id="afe976e526129f24f94234002a299832b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object eva2.server.go.problems.MatlabEvalMediator.getQuestion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>To be called from Matlab. </p>
<dl class="section return"><dt>Devuelve</dt><dd></dd></dl>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> (mp!=null) logMP(<span class="stringliteral">&quot;-- Question: &quot;</span> + BeanInspector.toString(question) + <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span> question;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9f44d10b424ab126bb7742e3701a3192"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object eva2.server.go.problems.MatlabEvalMediator.getSolution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Matlab may retrieve result. </p>
<dl class="section return"><dt>Devuelve</dt><dd></dd></dl>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">//      System.err.println(&quot;getting Sol &quot; + BeanInspector.toString(optSolution));</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">return</span> optSolution;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5bdaf1382420bca8ca18f7aa7bca89b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object eva2.server.go.problems.MatlabEvalMediator.getSolutionSet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Matlab may retrieve result as Object[] containing either double[] or int[]. </p>
<dl class="section return"><dt>Devuelve</dt><dd></dd></dl>
<div class="fragment"><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                   {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">//      System.err.println(&quot;getting SolSet &quot; + ((optSolSet != null) ? optSolSet.length : 0));</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">return</span> optSolSet;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3f5a0df22697f52d12d77e66d8e1892"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String eva2.server.go.problems.MatlabEvalMediator.getState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                             {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;ID: &quot;</span> + runID + <span class="stringliteral">&quot;, qu: &quot;</span> + BeanInspector.toString(question) + <span class="stringliteral">&quot; quit,fin,req &quot;</span> + <a class="code" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a579e11966ebc2c1112cd7d50b8834020">quit</a> + <span class="stringliteral">&quot;,&quot;</span> + fin +<span class="stringliteral">&quot;,&quot;</span> + requesting;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="ttc" id="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator_html_a579e11966ebc2c1112cd7d50b8834020"><div class="ttname"><a href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a579e11966ebc2c1112cd7d50b8834020">eva2.server.go.problems.MatlabEvalMediator.quit</a></div><div class="ttdeci">void quit()</div><div class="ttdef"><b>Definition:</b> MatlabEvalMediator.java:170</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad528111aed1211c20a632980b05b0fb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean eva2.server.go.problems.MatlabEvalMediator.isFinished </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>To be called from Matlab signalling when optimizaton is completely finished. </p>
<dl class="section return"><dt>Devuelve</dt><dd></dd></dl>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> fin;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a579e11966ebc2c1112cd7d50b8834020"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eva2.server.go.problems.MatlabEvalMediator.quit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancel waiting in any case. </p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                       {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">//      System.out.println(&quot;IN QUIT!&quot;);</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a579e11966ebc2c1112cd7d50b8834020">quit</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="ttc" id="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator_html_a579e11966ebc2c1112cd7d50b8834020"><div class="ttname"><a href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a579e11966ebc2c1112cd7d50b8834020">eva2.server.go.problems.MatlabEvalMediator.quit</a></div><div class="ttdeci">void quit()</div><div class="ttdef"><b>Definition:</b> MatlabEvalMediator.java:170</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac14638a42af72f90069826a9e9b445de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eva2.server.go.problems.MatlabEvalMediator.run </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait loop, wait until the <a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_problem.html">MatlabProblem</a> requests an evaluation (or finishes), then return. For debugging, an integer ID for this run may be provided. </p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                            {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        logMPOrSysOut(<span class="stringliteral">&quot;## MEM start run &quot;</span> + <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        runID=id;       </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordtype">int</span> k=0;<span class="keywordtype">int</span> mod=25;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">while</span> (!requesting &amp;&amp; !<a class="code" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#ad528111aed1211c20a632980b05b0fb1">isFinished</a>() &amp;&amp; !<a class="code" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a579e11966ebc2c1112cd7d50b8834020">quit</a>) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="comment">// wait for JE to pose a question or finish all</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">if</span> (sleepTime &gt; 0) <span class="keywordflow">try</span> { Thread.sleep(sleepTime); } <span class="keywordflow">catch</span>(Exception e) {};</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            k++;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <span class="keywordflow">if</span> ((k%mod)==0) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                logMPOrSysOut(<span class="stringliteral">&quot;MEM waiting for JE to ask... (&quot;</span> + mod +<span class="stringliteral">&quot;) &quot;</span>  + <a class="code" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#ab3f5a0df22697f52d12d77e66d8e1892">getState</a>());</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                mod*=2;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                <span class="keywordflow">if</span> (mod&lt;=0) mod = Integer.MAX_VALUE;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span> (requesting) logMPOrSysOut(<span class="stringliteral">&quot;-- MEM Request arrived in MP thread &quot;</span> + runID);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">else</span> logMPOrSysOut(<span class="stringliteral">&quot;-- MEM finished or quit &quot;</span> + runID); </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="comment">// requesting is true, now finish and let Matlab work</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="ttc" id="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator_html_ad528111aed1211c20a632980b05b0fb1"><div class="ttname"><a href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#ad528111aed1211c20a632980b05b0fb1">eva2.server.go.problems.MatlabEvalMediator.isFinished</a></div><div class="ttdeci">boolean isFinished()</div><div class="ttdef"><b>Definition:</b> MatlabEvalMediator.java:233</div></div>
<div class="ttc" id="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator_html_ab3f5a0df22697f52d12d77e66d8e1892"><div class="ttname"><a href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#ab3f5a0df22697f52d12d77e66d8e1892">eva2.server.go.problems.MatlabEvalMediator.getState</a></div><div class="ttdeci">String getState()</div><div class="ttdef"><b>Definition:</b> MatlabEvalMediator.java:116</div></div>
<div class="ttc" id="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator_html_a579e11966ebc2c1112cd7d50b8834020"><div class="ttname"><a href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a579e11966ebc2c1112cd7d50b8834020">eva2.server.go.problems.MatlabEvalMediator.quit</a></div><div class="ttdeci">void quit()</div><div class="ttdef"><b>Definition:</b> MatlabEvalMediator.java:170</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f46345bc7c4cc2734c1815e34d72c18"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eva2.server.go.problems.MatlabEvalMediator.run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait loop, wait until the <a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_problem.html">MatlabProblem</a> requests an evaluation (or finishes), then return. Calls the <a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#ac14638a42af72f90069826a9e9b445de">run(int)</a> method with ID zero. </p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                      {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a2f46345bc7c4cc2734c1815e34d72c18">run</a>(0);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="ttc" id="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator_html_a2f46345bc7c4cc2734c1815e34d72c18"><div class="ttname"><a href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#a2f46345bc7c4cc2734c1815e34d72c18">eva2.server.go.problems.MatlabEvalMediator.run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> MatlabEvalMediator.java:147</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9e9d2f1581ed7e3b87106b424bd57abd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eva2.server.go.problems.MatlabEvalMediator.setAnswer </td>
          <td>(</td>
          <td class="paramtype">double[]&#160;</td>
          <td class="paramname"><em>y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>To be called from Matlab giving the result of the question.</p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">y</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                      {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">//      logMPAndSysOut(&quot;Synch requesting B setAnswer &quot; + getState());</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keyword">synchronized</span>(requesting) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">//          logMPAndSysOut(&quot;In Synch requesting B setAnswer &quot; + getState());</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">if</span> (!requesting) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                String msg=<span class="stringliteral">&quot;Error: not in requesting state when answer arrived!!&quot;</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                System.err.println(msg);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                logMP(msg);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">//          System.err.println(&quot;answer is &quot; + BeanInspector.toString(y)); </span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">if</span> (y==null) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                System.err.println(<span class="stringliteral">&quot;Error: Matlab function returned null array - this is bad.&quot;</span>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                System.err.println(<span class="stringliteral">&quot;X-value was &quot;</span> + BeanInspector.toString(<a class="code" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#afe976e526129f24f94234002a299832b">getQuestion</a>()));</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            answer = y;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            requesting = <span class="keyword">false</span>; <span class="comment">// answer is finished, break request loop</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            logMP(<span class="stringliteral">&quot;-- setAnswer: &quot;</span> + BeanInspector.toString(y) + <span class="stringliteral">&quot;, req state is &quot;</span> + requesting + <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">//      logMPAndSysOut(&quot;Synch requesting B done &quot; + getState());</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="ttc" id="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator_html_afe976e526129f24f94234002a299832b"><div class="ttname"><a href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_eval_mediator.html#afe976e526129f24f94234002a299832b">eva2.server.go.problems.MatlabEvalMediator.getQuestion</a></div><div class="ttdeci">Object getQuestion()</div><div class="ttdef"><b>Definition:</b> MatlabEvalMediator.java:179</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adeba95238360f96c3d00666cd991bc0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eva2.server.go.problems.MatlabEvalMediator.setMatlabProblem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeva2_1_1server_1_1go_1_1problems_1_1_matlab_problem.html">MatlabProblem</a>&#160;</td>
          <td class="paramname"><em>theMP</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                                      {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        mp=theMP;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        logMP(<span class="stringliteral">&quot;setting MP &quot;</span> + theMP + <span class="stringliteral">&quot; for MEM &quot;</span> + <span class="keyword">this</span> + <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>La documentación para esta clase fue generada a partir del siguiente fichero:<ul>
<li>src/eva2/server/go/problems/<a class="el" href="_matlab_eval_mediator_8java.html">MatlabEvalMediator.java</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generado el Domingo, 24 de Noviembre de 2013 20:07:26 para EvaProyectDoc por &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
